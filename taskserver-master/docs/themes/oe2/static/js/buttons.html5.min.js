!function(t){"function"==typeof define&&define.amd?define(["oebio/data/jscode/jquery","datatables.net","datatables.net-buttons"],function(e){return t(e,window,document)}):"object"==typeof exports?module.exports=function(e, n, o, r){return e||(e=window),n&&n.fn.dataTable||(n=require("datatables.net")(e,n).$),n.fn.dataTable.Buttons||require("datatables.net-buttons")(e,n),t(n,e,e.document,o,r)}:t(jQuery,window,document)}(function(t, e, n, o, r, a){"use strict";var i=t.fn.dataTable,s=function(t){if(!(void 0===t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=function(){return t.URL||t.webkitURL||t},n=t.document.createElementNS("http://www.w3.org/1999/xhtml","a"),o="download"in n,r=function(t){var e=new MouseEvent("click");t.dispatchEvent(e)},i=/constructor/i.test(t.HTMLElement)||t.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent),c=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},u=function(t){setTimeout(function(){"string"==typeof t?e().revokeObjectURL(t):t.remove()},4e4)},f=function(t,e,n){for(var o=(e=[].concat(e)).length;o--;){var r=t["on"+e[o]];if("function"==typeof r)try{r.call(t,n||t)}catch(t){c(t)}}},l=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},d=function(c,d,p){p||(c=l(c));var b,y=this,m="application/octet-stream"===c.type,v=function(){f(y,"writestart progress write writeend".split(" "))};if(y.readyState=y.INIT,o)return b=e().createObjectURL(c),void setTimeout(function(){n.href=b,n.download=d,r(n),v(),u(b),y.readyState=y.DONE});!function(){if((s||m&&i)&&t.FileReader){var n=new FileReader;return n.onloadend=function(){var e=s?n.result:n.result.replace(/^data:[^;]*;/,"data:attachment/file;");t.open(e,"_blank")||(t.location.href=e),e=a,y.readyState=y.DONE,v()},n.readAsDataURL(c),void(y.readyState=y.INIT)}b||(b=e().createObjectURL(c)),m?t.location.href=b:t.open(b,"_blank")||(t.location.href=b),y.readyState=y.DONE,v(),u(b)}()},p=d.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,n){return e=e||t.name||"download",n||(t=l(t)),navigator.msSaveOrOpenBlob(t,e)}:(p.abort=function(){},p.readyState=p.INIT=0,p.WRITING=1,p.DONE=2,p.error=p.onwritestart=p.onprogress=p.onwrite=p.onabort=p.onerror=p.onwriteend=null,function(t,e,n){return new d(t,e||t.name||"download",n)})}}("undefined"!=typeof self&&self||void 0!==e&&e||this.content);i.fileSave=s;var c=function(e,n){var o="*"===e.filename&&"*"!==e.title&&e.title!==a?e.title:e.filename;return"function"==typeof o&&(o=o()),-1!==o.indexOf("*")&&(o=t.trim(o.replace("*",t("title").text()))),o=o.replace(/[^a-zA-Z0-9_\u00A1-\uFFFF\.,\-_ !\(\)]/g,""),n===a||!0===n?o+e.extension:o},u=function(t){return t.newline?t.newline:navigator.userAgent.match(/Windows/)?"\r\n":"\n"},f=function(t,e){for(var n=u(e),o=t.buttons.exportData(e.exportOptions),r=e.fieldBoundary,i=e.fieldSeparator,s=new RegExp(r,"g"),c=e.escapeChar!==a?e.escapeChar:"\\",f=function(t){for(var e="",n=0,o=t.length;n<o;n++)n>0&&(e+=i),e+=r?r+(""+t[n]).replace(s,c+r)+r:t[n];return e},l=e.header?f(o.header)+n:"",d=e.footer&&o.footer?n+f(o.footer):"",p=[],b=0,y=o.body.length;b<y;b++)p.push(f(o.body[b]));return{str:l+p.join(n)+d,rows:p.length}};return i.ext.buttons.copyHtml5={className:"buttons-copy buttons-html5",text:function(t){return t.i18n("buttons.copy","Copy")},action:function(e,o,r,a){this.processing(!0);var i=this,s=f(o,a),c=s.str,u=t("<div/>").css({height:1,width:1,overflow:"hidden",position:"fixed",top:0,left:0});a.customize&&(c=a.customize(c,a));var l=t("<textarea readonly/>").val(c).appendTo(u);if(n.queryCommandSupported("copy")){u.appendTo(o.table().container()),l[0].focus(),l[0].select();try{var d=n.execCommand("copy");if(u.remove(),d)return o.buttons.info(o.i18n("buttons.copyTitle","复制到剪切板"),o.i18n("buttons.copySuccess",{1:"已复制1行到剪切板",_:"已复制 %d 行到剪切板"},s.rows),2e3),void this.processing(!1)}catch(t){}}var p=t("<span>"+o.i18n("buttons.copyKeys","Press <i>ctrl</i> or <i>⌘</i> + <i>C</i> to copy the table data<br>to your system clipboard.<br><br>To cancel, click this message or press escape.")+"</span>").append(u);o.buttons.info(o.i18n("buttons.copyTitle","Copy to clipboard"),p,0),l[0].focus(),l[0].select();var b=t(p).closest(".dt-button-info"),y=function(){b.off("click.buttons-copy"),t(n).off(".buttons-copy"),o.buttons.info(!1)};b.on("click.buttons-copy",y),t(n).on("keydown.buttons-copy",function(t){27===t.keyCode&&(y(),i.processing(!1))}).on("copy.buttons-copy cut.buttons-copy",function(){y(),i.processing(!1)})},exportOptions:{},fieldSeparator:"\t",fieldBoundary:"",header:!0,footer:!1},i.ext.buttons.csvHtml5={bom:!1,className:"buttons-csv buttons-html5",available:function(){return e.FileReader!==a&&e.Blob},text:function(t){return t.i18n("buttons.csv","CSV")},action:function(t,e,o,r){this.processing(!0);var a=f(e,r).str,i=r.charset;r.customize&&(a=r.customize(a,r)),!1!==i?(i||(i=n.characterSet||n.charset),i&&(i=";charset="+i)):i="",r.bom&&(a="\ufeff"+a),s(new Blob([a],{type:"text/csv"+i}),c(r),!0),this.processing(!1)},filename:"*",extension:".csv",exportOptions:{},fieldSeparator:",",fieldBoundary:'"',escapeChar:'"',charset:null,header:!0,footer:!1},i.Buttons});